{"version":3,"sources":["file:///C:/Users/maide/OneDrive/Documents/GitHub/cocos-observer/assets/Cell.ts"],"names":["_decorator","Component","ColorProvider","EventSystem","Events","ccclass","Cell","type","m_grounded","init","getInstance","changeColor","node","registerEvents","on","PerformAction","onPerformAction","bind","actionType","console","log","name","onDestroy","off"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;;AACZC,MAAAA,a,iBAAAA,a;;AACAC,MAAAA,W,iBAAAA,W;;AACAC,MAAAA,M,iBAAAA,M;;;;;;;;;OACH;AAAEC,QAAAA;AAAF,O,GAAcL,U;;sBAGPM,I,WADZD,OAAO,CAAC,MAAD,C,gBAAR,MACaC,IADb,SAC0BL,SAD1B,CACoC;AAAA;AAAA;AAAA,eACzBM,IADyB,GACV,CADU;AAAA,eAExBC,UAFwB,GAED,KAFC;AAAA;;AAIzBC,QAAAA,IAAI,CAACF,IAAD,EAAe;AACtB,eAAKA,IAAL,GAAYA,IAAZ;AACA,cAAG,KAAKA,IAAL,GAAU,CAAb,EAAgB,KAAKC,UAAL,GAAkB,IAAlB;AAEhB;AAAA;AAAA,8CAAcE,WAAd,GAA4BC,WAA5B,CAAwCJ,IAAxC,EAA8C,KAAKK,IAAnD;AACA,eAAKC,cAAL;AACH;;AAEOA,QAAAA,cAAc,GAAG;AACrB;AAAA;AAAA,0CAAYH,WAAZ,GAA0BI,EAA1B,CAA6B;AAAA;AAAA,gCAAOC,aAApC,EAAmD,KAAKC,eAAL,CAAqBC,IAArB,CAA0B,IAA1B,CAAnD,EAAoF,IAApF;AACH;;AAEOD,QAAAA,eAAe,CAACE,UAAD,EAAqB;AACxC,cAAG,CAAC,KAAKV,UAAT,EAAqB;AACjBW,UAAAA,OAAO,CAACC,GAAR,cAAuB,KAAKR,IAAL,CAAUS,IAAjC,4BAA4DH,UAA5D;AACP;;AAEDI,QAAAA,SAAS,GAAG;AACR;AAAA;AAAA,0CAAYZ,WAAZ,GAA0Ba,GAA1B,CAA8B;AAAA;AAAA,gCAAOR,aAArC,EAAoD,KAAKC,eAAL,CAAqBC,IAArB,CAA0B,IAA1B,CAApD,EAAqF,IAArF;AACH;;AAvB+B,O","sourcesContent":["import { _decorator, Component, Node, Sprite } from 'cc';\nimport { ColorProvider } from './ColorProvider';\nimport { EventSystem } from './EventSystem';\nimport { Events } from './Events';\nconst { ccclass } = _decorator;\n\n@ccclass('Cell')\nexport class Cell extends Component {\n    public type: number = 0;\n    private m_grounded : boolean = false;\n\n    public init(type: number) {\n        this.type = type;\n        if(this.type>0) this.m_grounded = true;\n\n        ColorProvider.getInstance().changeColor(type, this.node);\n        this.registerEvents();\n    }\n\n    private registerEvents() {\n        EventSystem.getInstance().on(Events.PerformAction, this.onPerformAction.bind(this), this);\n    }\n\n    private onPerformAction(actionType: string) {\n        if(!this.m_grounded) return;\n            console.log(`Cell at ${this.node.name} performing action: ${actionType}`);\n    }\n\n    onDestroy() {\n        EventSystem.getInstance().off(Events.PerformAction, this.onPerformAction.bind(this), this);\n    }\n}\n"]}